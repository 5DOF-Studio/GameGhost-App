<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:WitnessDesktop.Models.Timeline"
             x:Class="WitnessDesktop.Views.DirectMessageBubble"
             x:DataType="models:TimelineEvent">

    <VerticalStackLayout Spacing="4" Padding="0,4">

        <!-- User message -->
        <Border IsVisible="{Binding Role, Converter={StaticResource RoleToUserVisibility}}"
                BackgroundColor="{StaticResource BgCardHover}"
                StrokeThickness="0"
                Padding="14,10">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="14,14,14,4" />
            </Border.StrokeShape>

            <Label Text="{Binding Summary}"
                   FontSize="18"
                   FontFamily="Rajdhani-Regular"
                   TextColor="{StaticResource TextPrimary}"
                   LineBreakMode="WordWrap" />
        </Border>

        <!-- Brain response (full text, no truncation) -->
        <Grid IsVisible="{Binding Role, Converter={StaticResource RoleToAssistantVisibility}}"
              ColumnDefinitions="20,*"
              Padding="0,2,0,0">

            <Label Grid.Column="0"
                   Text=">"
                   FontSize="16"
                   TextColor="{StaticResource TextMuted}"
                   VerticalOptions="Start"
                   Margin="0,4,0,0" />

            <Label Grid.Column="1"
                   Text="{Binding FullContent}"
                   FontSize="18"
                   FontFamily="Rajdhani-Regular"
                   TextColor="{StaticResource TextPrimary}"
                   LineBreakMode="WordWrap" />
        </Grid>

    </VerticalStackLayout>

</ContentView>
